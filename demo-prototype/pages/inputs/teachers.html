<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Inputs — Teachers — Demo</title><script src="https://cdn.tailwindcss.com"></script><link rel="stylesheet" href="../../css/demo.css" /></head><body class="bg-gray-50 min-h-screen">
  <div class="flex min-h-screen">
    <aside class="w-64 bg-white p-4 border-r">
      <div class="mb-4"><h3 class="text-lg font-semibold">Inputs</h3><div class="text-sm text-gray-500">Manage teachers, rooms, courses, slots</div></div>
      <nav class="mt-4 space-y-2">
        <a href="../hod-dashboard.html" class="block py-2 px-3 rounded hover:bg-gray-100">Back to Dashboard</a>
        <a class="block py-2 px-3 rounded bg-indigo-50">Teachers</a>
        <a href="../rooms.html" class="block py-2 px-3 rounded hover:bg-gray-100">Rooms</a>
        <a href="../courses.html" class="block py-2 px-3 rounded hover:bg-gray-100">Courses</a>
        <a href="../timeslots.html" class="block py-2 px-3 rounded hover:bg-gray-100">Time Slots</a>
      </nav>
    </aside>
    <main class="flex-1 p-6">
      <header class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Teachers</h2>
        <div class="flex items-center gap-2">
          <button id="btn-add-teacher-page" class="px-3 py-2 rounded bg-emerald-500 text-white">Add Teacher</button>
          <button id="btn-load-sample-data" class="px-3 py-2 rounded border">Load Sample Data</button>
        </div>
      </header>
      <section class="demo-card p-4">
        <table class="min-w-full"><thead><tr class="text-left text-sm text-gray-600"><th class="p-2">ID</th><th class="p-2">Name</th><th class="p-2">Email</th><th class="p-2">Pref Load</th><th class="p-2">Actions</th></tr></thead>
          <tbody id="teachers-table"></tbody>
        </table>
      </section>
    </main>
  </div>
  <div id="modal-teacher" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-40">
    <div class="bg-white rounded p-4 w-full max-w-md">
      <h3 class="text-lg font-semibold mb-3" id="modal-teacher-title">Add Teacher</h3>
      <form id="modal-teacher-form" onsubmit="return false;" class="space-y-3">
        <div><label class="text-sm">Teacher ID (auto)</label><input id="teacher-id" class="mt-1 block w-full border rounded px-3 py-2" readonly /></div>
        <div><label class="text-sm">Name</label><input id="teacher-name" class="mt-1 block w-full border rounded px-3 py-2" /></div>
        <div><label class="text-sm">Email</label><input id="teacher-email" class="mt-1 block w-full border rounded px-3 py-2" /></div>
        <div><label class="text-sm">Preferred load (hours/week)</label><input id="teacher-load" type="number" class="mt-1 block w-full border rounded px-3 py-2" /></div>
        <div class="flex items-center justify-end gap-2"><button id="teacher-cancel" class="px-3 py-2 rounded border">Cancel</button><button id="teacher-save" class="px-3 py-2 rounded bg-indigo-600 text-white">Save</button></div>
      </form>
    </div>
  </div>
  <script src="../../js/state.js"></script><script src="../../js/ui.js"></script>
  <script>
    function renderTeachers() {
      const tbody = document.getElementById('teachers-table');
      tbody.innerHTML = '';
      const teachers = DemoState.listTeachers();
      if (!teachers.length) {
        tbody.innerHTML = '<tr><td colspan="5" class="p-4 text-sm text-gray-500">No teachers yet.</td></tr>';
        return;
      }
      teachers.forEach(t => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class="p-2 text-sm font-mono">${t.teacherId}</td><td class="p-2">${t.name}</td><td class="p-2">${t.email}</td><td class="p-2">${t.preferredLoad || 0}</td><td class="p-2"><button class="btn-edit text-sm mr-2" data-id="${t.teacherId}">Edit</button><button class="btn-delete text-sm text-red-600" data-id="${t.teacherId}">Delete</button></td>`;
        tbody.appendChild(tr);
      });
      Array.from(document.getElementsByClassName('btn-edit')).forEach(b => b.addEventListener('click', function () {
        const id = this.getAttribute('data-id'); const t = DemoState.getTeacherById(id); if (!t) return DemoUI.showSnackbar('Teacher not found', 'error');
        document.getElementById('teacher-id').value = t.teacherId; document.getElementById('teacher-name').value = t.name; document.getElementById('teacher-email').value = t.email; document.getElementById('teacher-load').value = t.preferredLoad || ''; document.getElementById('modal-teacher-title').textContent = 'Edit Teacher'; DemoUI.openModal('modal-teacher');
      }));
      Array.from(document.getElementsByClassName('btn-delete')).forEach(b => b.addEventListener('click', function () {
        const id = this.getAttribute('data-id'); if (!confirm('Delete teacher ' + id + '?')) return; DemoState.deleteTeacher(id); DemoUI.showSnackbar('Teacher deleted', 'success'); renderTeachers();
      }));
    }
    document.addEventListener('DOMContentLoaded', function () {
      renderTeachers();
      document.getElementById('btn-load-sample-data').addEventListener('click', function () {
        fetch('../../data/sample-inputs.json').then(r => r.json()).then(json => { DemoState.resetStateToSample(json); renderTeachers(); DemoUI.showSnackbar('Sample data loaded', 'success'); }).catch(err => DemoUI.showSnackbar('Failed to load sample data', 'error'));
      });
      document.getElementById('btn-add-teacher-page').addEventListener('click', function () {
        document.getElementById('teacher-id').value = ''; document.getElementById('teacher-name').value = ''; document.getElementById('teacher-email').value = ''; document.getElementById('teacher-load').value = ''; document.getElementById('modal-teacher-title').textContent = 'Add Teacher'; DemoUI.openModal('modal-teacher');
      });
      document.getElementById('teacher-cancel').addEventListener('click', function () { DemoUI.closeModal('modal-teacher'); });
      document.getElementById('teacher-save').addEventListener('click', function () {
        const idField = document.getElementById('teacher-id').value.trim(); const name = document.getElementById('teacher-name').value.trim(); const email = document.getElementById('teacher-email').value.trim(); const load = parseInt(document.getElementById('teacher-load').value, 10) || 0;
        if (!name || !email) { DemoUI.showSnackbar('Name and email required', 'error'); return; }
        if (idField) { DemoState.updateTeacher(idField, { name, email, preferredLoad: load }); DemoUI.showSnackbar('Teacher updated', 'success'); } else { const teacher = { teacherId: 'T' + Math.floor(Math.random() * 900 + 100), name, email, preferredLoad: load, availability: [] }; DemoState.addTeacher(teacher); DemoUI.showSnackbar('Teacher added', 'success'); }
        DemoUI.closeModal('modal-teacher'); renderTeachers();
      });
      document.getElementById('modal-teacher').addEventListener('click', function (e) { if (e.target === this) DemoUI.closeModal('modal-teacher'); });
    });
  </script></body></html>